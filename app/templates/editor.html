{% extends 'base.html' %}
{% block title %}Imprint Â· Editor{% endblock %}
{% block content %}
<section class="stack">
    <p class="eyebrow">Editor</p>
    <h1>{{ 'Revise essay' if identifier else 'New essay' }}</h1>
    <p class="lede">Write in Markdown on the left and watch the preview update. Save a local draft or publish to relays.</p>
</section>
<div class="editor-layout">
    <form method="post" action="/publish" class="card stack editor-form">
        <input type="hidden" name="identifier" value="{{ identifier or '' }}">
        <div class="field">
            <label for="title">Title</label>
            <input id="title" type="text" name="title" value="{{ title }}" required>
        </div>
        <div class="field">
            <label for="summary">Summary (optional)</label>
            <textarea id="summary" name="summary" rows="2">{{ summary or '' }}</textarea>
        </div>
        <div class="field">
            <label for="tags">Tags (comma-separated, optional)</label>
            <input id="tags" type="text" name="tags" value="{{ tags or '' }}" placeholder="nostr, writing, tech">
        </div>
        <div class="field">
            <label for="content">Content (Markdown)</label>
            <textarea id="content" name="content" rows="12" hx-post="/preview" hx-trigger="keyup changed delay:300ms" hx-target="#preview" hx-swap="innerHTML">{{ content }}</textarea>
        </div>
        <div class="status-message neutral" role="status">Use <strong>Save draft</strong> to keep changes locally. <strong>Publish</strong> sends the signed event to configured relays.</div>
        <div class="row wrap gap actions">
            <button type="submit" name="action" value="draft" class="button ghost">Save draft</button>
            <button type="submit" name="action" value="publish" class="button">Publish</button>
        </div>
    </form>
    <details class="card preview-pane" open>
        <summary>Preview</summary>
        <div id="preview" class="prose" aria-live="polite"></div>
    </details>
</div>
{% endblock %}
