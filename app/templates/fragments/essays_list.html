<ul class="essay-list" role="list">
    {% for version in essays %}
        <li class="card essay-card">
            <div class="stack">
                <div class="meta-line">
                    <span class="muted">{{ version.published_at.strftime('%b %d, %Y') if version.published_at else 'Unpublished' }}</span>
                    <span class="dot" aria-hidden="true">â€¢</span>
                    <span class="muted">{{ version.essay.author_pubkey|author_display }}</span>
                </div>
                <h3 class="essay-title"><a href="/essay/{{ version.essay.identifier }}">{{ version.essay.title }}</a></h3>
                {% if version.summary %}<p class="muted">{{ version.summary }}</p>{% endif %}
                {% set topics = version.tags|tags_list %}
                {% if topics %}
                    <div class="tags" aria-label="Tags">
                        {% for topic in topics %}
                            <span class="badge subtle">{{ topic }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
                {% if version.event_id %}
                    <div
                        class="engagement-shell"
                        hx-get="/posts/{{ version.event_id }}/engagement"
                        hx-trigger="load, authChanged from:body"
                        hx-swap="outerHTML"
                    >
                        {% set event_id = version.event_id %}
                        {% set like_count = 0 %}
                        {% set liked_by_me = false %}
                        {% set zap_count = 0 %}
                        {% set total_sats = 0 %}
                        {% include 'partials/engagement_bar.html' %}
                    </div>
                {% endif %}
            </div>
        </li>
    {% else %}
        <li class="card">No essays yet.</li>
    {% endfor %}
</ul>
