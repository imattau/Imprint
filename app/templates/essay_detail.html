{% extends 'base.html' %}
{% block content %}
<div class="essay">
    <div class="meta">{{ essay.identifier }} 路 v{{ version.version if version else '?' }} 路 {{ essay.author_pubkey }}</div>
    <h1>{{ essay.title }}</h1>
    {% if version %}
    <article class="content">{{ version.content | markdown }}</article>
    {% else %}
    <p>No version available.</p>
    {% endif %}
    <div class="actions">
        <a href="/editor?d={{ essay.identifier }}">Revise</a>
    </div>
    <details>
        <summary>View history</summary>
        <ul>
            {% for v in history %}
                <li>v{{ v.version }} 路 {{ v.published_at }} 路 event {{ v.event_id }}</li>
            {% endfor %}
        </ul>
    </details>
</div>
{% endblock %}
