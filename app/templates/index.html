{% extends 'base.html' %}
{% set instance_settings = request.state.instance_settings %}
{% block title %}{{ instance_settings.site_name if instance_settings else 'Imprint' }} · Home{% endblock %}
{% block content %}
<section class="hero stack">
    <p class="eyebrow">Recently published</p>
    <h1>{{ instance_settings.site_tagline if instance_settings and instance_settings.site_tagline else 'Fresh essays from the network' }}</h1>
    <p class="lede">{{ instance_settings.site_description if instance_settings and instance_settings.site_description else 'A calm feed of the newest published versions observed from your relays. Filter by author, tag, or time window.' }}</p>
    <div class="row wrap gap">
        <a class="button" href="/essays">Browse all essays</a>
        <p class="muted">Entries are displayed as we first saw them—no ranking or weighting.</p>
    </div>
</section>
<section class="card">
    <form class="filter-form" action="/" method="get" hx-get="/partials/recent" hx-target="#recent-list" hx-swap="innerHTML" hx-push-url="true">
        <div class="field">
            <label for="author-home">Author (npub or hex)</label>
            <input id="author-home" type="text" name="author" value="{{ filters.author }}" placeholder="npub1...">
        </div>
        <div class="field">
            <label for="tag-home">Tag</label>
            <input id="tag-home" type="text" name="tag" value="{{ filters.tag }}" placeholder="writing">
        </div>
        <div class="field">
            <label for="days-home">Last days</label>
            <select id="days-home" name="days">
                <option value="" {% if not filters.days %}selected{% endif %}>Any</option>
                <option value="7" {% if filters.days|string == '7' %}selected{% endif %}>7</option>
                <option value="30" {% if filters.days|string == '30' %}selected{% endif %}>30</option>
            </select>
        </div>
        <div class="field action-field">
            <button type="submit" class="button">Apply filters</button>
        </div>
    </form>
</section>
<section class="stack" aria-live="polite">
    <div id="recent-list">
        {% include 'fragments/essays_list.html' %}
    </div>
    <p class="muted small">Entries stream in from configured relays. Timestamps reflect when we first observed publication.</p>
</section>
{% endblock %}
